<html>
<head>
    <title>Dashboard</title>
    <link href="c3.min.css" rel="stylesheet"/>
    <script src="d3.min.js"></script>
    <script src="c3.min.js"></script>
</head>
<body>
<h1>Dashboard</h1>
<div id="chart"></div>

<script>
    var chart = c3.generate({
        bindto: '#chart',
        data: {
            columns: []
        }
    });

    var host = window.location.href.replace(/^http/, 'ws') + 'ws';
    console.log(host);
    var socket = new WebSocket(host);

    socket.onmessage = function (event) {
        var data = JSON.parse(event.data);
        console.log(data);

        chart.load({
            columns: data
        });
    };
</script>
</body>
</html>
